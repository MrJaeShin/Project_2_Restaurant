<%- include('../partials/header') %>

<section id="show-page">
  <div>Name:</div>
  <div><%= restaurants.name %></div>
  <div>Address:</div>
  <div><%= restaurants.address %></div>
  <div>Description:</div>
  <div><%= restaurants.description %></div>
  <div>Parking Availability:</div>
  <div><%= restaurants.parking ? 'Yes' : 'No' %></div>
</section>

<br /><br />
<h2>Reviews</h2>
<form id="add-review-form" method="POST" action="/restaurants/<%= restaurants._id %>/reviews">
	<lable>Username</lable>
	<input name="username" /></br>
	<label>Review:</label>
  	<textarea name="content"></textarea></br>
  	<label>Rating:</label>
  	<select name="rating">
    	<option value="1">1</option>
    	<option value="2">2</option>
    	<option value="3">3</option>
    	<option value="4">4</option>
    	<option value="5">5</option>
  	</select></br>
  	<input type="submit" value="Add Review" />
</form>

<% if (restaurants.reviews.length) { %>
<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Review</th>
      <th>Rating</th>
	  <th></th>
    </tr>
</thead>
<tbody>
	<% restaurants.reviews.forEach((r) => { %>
		<tr>
			<td><%= r.createdAt.toLocaleDateString() %></td>
			<td><%= r.content %></td>
			<td><%= r.rating %></td>
			<td><form action="/reviews/<%= r._id %>?_method=DELETE" method="POST">
				<input type="submit" value="Delete This Review" />
			</form></td>
    	</tr>
    <% }) %>
</tbody>
</table>
<% } else { %>
<h5>No Reviews Yet</h5>

<% } %> <%- include('../partials/footer') %>
